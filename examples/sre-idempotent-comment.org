#+title: SRE v1 — Idempotent comment insertion (header)

#+begin_patch (:version "1" :op "sre" :file "flake.nix")
#+pair (:occur first :match regex)
#+begin_from
\={[ \t]*\n[ \t]*description[ \t]*=[ \t]*"Flake to run a local HTTP server in the project folder";\n\([ \t]*\n[ \t]*[^/].*\)
#+end_from
#+begin_to
{
  description = "Flake to run a local HTTP server in the project folder";

  //
    Как запускать:

      nix run .#serve

    или

      nix develop
      ./result/bin/serve

    Это поднимет http сервер на http://localhost:8000
    (статически раздаёт текущую папку).
  //
\1
#+end_to
#+end_patch
