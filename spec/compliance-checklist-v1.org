#+title: Compliance Checklist v1 — Соответствие спецификациям
#+author: Peter Kosov <11111000000@email.com>
#+language: ru
#+options: toc:2 num:t
#+property: header-args :results silent

* Назначение
- Контрольный список для проверки соответствия реализации спецификациям v1.

* Форматы (обязательное)
- Блоки используют только =begin_patch/end_patch= (./parser-registry-v1.org).
- Поддержаны :op:
  - sre, sre-batch (./sre-v1.org)
  - patch (unified diff одного файла) (./patch-unified-diff-v1.org)
  - create/delete/rename (./file-ops-v1.org)
- Алиасы блоков не поддерживаются (v1).

* Парсеры
- Детерминированный разбор SRE по DELIM, без вложенных конструкций.
- Валидация путей (без абсолютов и «..»).
- PATCH: отказ на многофайловых диффах, на бинарных секциях, на rename/copy.
- Ошибки сигнализируются через define-error и коды из ./errors-v1.org.

* Dry-run
- SRE: подсчёт совпадений, проверка :expect при :occur all, мини-дифф.
- PATCH: git apply --check с захватом stdout/stderr.
- CREATE/DELETE/RENAME: валидация предусловий, отчёт действий.

* Применение
- Порядок типов: delete → rename → create → patch → sre/sre-batch (./apply-pipeline-v1.org).
- Групповое применение (C-c !) — остановка на первой ошибке, без автоматического отката.
- Коммиты в ветку carriage/WIP; сообщения включают {op} и {file|path}.

* UI/UX
- Клавиши и команды из ./ui-v1.org.
- Буфер отчёта, предпросмотр диффов, подтверждение перед применением.

* Безопасность
- Политики из ./security-v1.org соблюдены: пути, EOL, лимиты, запреты.
- TRAMP/remote — отключено или явно ограничено в v1.

* Промпты
- Профили Ask/Code из ./prompt-profiles-v1.org.
- В Code — строго только блоки =patch=; DELIM вставляет инструмент; пути относительные.

* Тестирование
- Юнит-тесты ERT для всех парсеров и аплаеров.
- Интеграционные тесты с тестовым git-репозиторием.
- Золотые Org-файлы.

* Документация
- Обновлён ./index.org.
- Описаны коды ошибок и формат сообщений (./errors-v1.org).

* Подпись
- Версия реализации: v1
- Дата, ответственный
