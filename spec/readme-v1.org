#+title: README v1 — Спецификация README.org для Carriage-mode
#+author: Carriage Team
#+language: ru
#+options: toc:2 num:t
#+property: header-args :results silent

* Назначение
- Задать нормативное содержание и структуру файла README.org для пакета Carriage-mode (распространение через MELPA/GNU ELPA/NonGNU ELPA).
- Обеспечить согласованность README с остальными спецификациями, документацией и чек-листами соответствия.

* Область применения
- Применяется к основному README.org в корне репозитория (или аналогичному файлу, если требуется дистрибуция под другим именем).
- Обязательна для релизов, публикаций в MELPA/GNU ELPA/NonGNU ELPA и при подготовке пакета к распространению через package.el.
- Не отменяет дополнительных файлов документации (FAQ, CONTRIBUTING, CHANGELOG), но определяет обязательный минимум в README.

* Целевые аудитории README
- Пользователи Emacs, устанавливающие пакет через MELPA/ELPA.
- Разработчики, оценивающие пригодность Carriage-mode под свои рабочие процессы.
- Ревьюеры MELPA (требуют стандартизированный набор разделов).
- Сопровождающие проекта.

* Обязательная структура README (верхний уровень)
1. **Заголовок и бейджи**
   - Формат Org: `#+title: Carriage-mode — …` плюс отображаемое заголовочное предложение.
   - Бейджи (минимум):
     - Статус MELPA: `[[https://melpa.org/#/carriage-mode][file:https://melpa.org/packages/carriage-mode-badge.svg]]`
     - Статус Stable (при наличии): `[[https://stable.melpa.org/#/carriage-mode][file:https://stable.melpa.org/packages/carriage-mode-badge.svg]]`
     - Лицензия: SVG/текст (например, GPL-3.0+).
     - Статус CI (если сборка публична).
   - Дополнительные бейджи (coverage, releases) допускаются, но не заменяют обязательные.

2. **Краткое резюме («TL;DR» / Elevator Pitch)**
   - 2–3 предложения, описывающие назначение Carriage-mode и ключевую ценность.
   - Указать минимальные требования: версия Emacs, поддерживаемые ОС.

3. **Особенности / Возможности**
   - Нумерованный или маркированный список ключевых возможностей (минимум 5 пунктов).
   - Ссылки на соответствующие спецификации:
     - UI — [[./spec/ui-v1.org][ui-v1]]
     - Apply — [[./spec/apply-pipeline-v1.org][apply-pipeline-v1]]
     - Suites/Intent — [[./spec/prompt-profiles-v1.org][prompt-profiles-v1]]

4. **Установка**
   - Подразделы:
     - MELPA (use-package пример + `M-x package-install`).
     - GNU ELPA/NonGNU ELPA (если пакет опубликован; иначе указать статус и альтернативу).
     - Ручная установка (clone + `load-path`).
   - Пример конфигурации через `use-package` (кодовый блок `emacs-lisp`).

5. **Быстрый старт**
   - Шаги 1–3 с лаконичными пояснениями (включая включение режима в Org, отправку первого запроса).
   - Ссылки на demo GIF/скриншоты (опционально; хранятся в ./docs/ или GitHub assets).

6. **Интерактивные команды и хоткеи**
   - Таблица или список основных команд (минимум: send-buffer, send-subtree, apply-at-point, apply-last-iteration, open-buffer, select-suite/model/engine).
   - Ссылка на [[./spec/api-v1.org][api-v1]] и [[./spec/keyspec-v1.org][keyspec-v1]].

7. **Настройки и расширяемость**
   - Краткий обзор ключевых `defcustom` (intent, suite, транспорт, apply-engine, контекст).
   - Указать, что полный список — в [[./spec/api-v1.org][api-v1]] и соответствующих спецификациях.
   - Примеры переопределения suite/intent, подключения собственного транспорта/движка.

8. **Требования и совместимость**
   - Минимальная версия Emacs (указать конкретное число).
   - Зависимости (gptel, magit — по мере необходимости).
   - Поддерживаемые ОС/архитектуры (если есть ограничения).
   - Политики безопасности (ссылка на [[./spec/security-v1.org][security-v1]]).

9. **Отладка и FAQ**
   - Подразделы:
     - Как посмотреть логи (`carriage-show-log`, `carriage-show-traffic`).
     - Стандартные проблемы и решения (например, отсутствует MELPA, тайм-аут git).
     - Ссылки на разделы [[./spec/logging-v1.org][logging-v1]] и [[./spec/testing-v1.org][testing-v1]].

10. **Вклад и обратная связь**
    - Указать процедуры: заявки через issues/PR, соответствие [[./spec/compliance-checklist-v1.org][compliance-checklist-v1]].
    - Ссылка на CONTRIBUTING.org (если есть) и инструкции по тестированию (`make test`, `ert`).

11. **Лицензия и юридическая информация**
    - Явно указать лицензию (GPL-3.0-or-later или актуальную).
    - Ссылка на LICENSE и упоминание авторов/вкладчиков.

12. **История изменений**
    - Ссылка на CHANGELOG.org (или раздел внутри README с последними релизами).
    - Если отдельный файл отсутствует — добавить краткий список последних версий в README.

13. **Благодарности / Ссылки**
    - Опционально: упоминание вдохновивших проектов, ссылки на статьи, презентации.

* Дополнительные разделы (опциональные)
- Скриншоты / GIF — в конце README или в отдельной директории docs/.
- Раздел «Планы развития» — краткий roadmap (при желании).
- Раздел «Часто используемые рецепты» — ссылки на recipes/README-recipes.org.

* Форматирование и стиль
- Org-mode синтаксис; избегать Markdown.
- Каждый раздел начинается с заголовка второго уровня (`*` внутри README).
- Текст на русском (основной) с возможной англоязычной версией (подзаголовок `** English summary`).
- Кодовые примеры оформлять блоками `#+begin_src emacs-lisp` … `#+end_src`.
- Бейджи располагать сразу под заголовком, без списков.
- Внутренние ссылки использовать относительные пути (например, `[[./spec/ui-v1.org][UI спецификация]]`).
- Сохранять ширину строк ≤ 100 символов; переносить вручную при необходимости.
- Указывать версии/даты при упоминании релизов.

* Соответствие с другими спецификациями
- README ссылается и резюмирует:
  - API и команды — [[./spec/api-v1.org]]
  - UI и режимы — [[./spec/ui-v1.org]]
  - Apply/Engines — [[./spec/apply-engines-v1.org]] и [[./spec/apply-pipeline-v1.org]]
  - Настройки контекста — [[./spec/context-integration-v1.org]]
  - Точки расширения — [[./spec/extensibility-points-v1.org]]
  - Тестирование — [[./spec/testing-v1.org]]
  - Безопасность — [[./spec/security-v1.org]]
- README не дублирует полные спецификации; каждая ссылка сопровождается кратким описанием.

* Обновление и сопровождение README
- README обновляется при:
  - Изменении минимальных требований (версии Emacs, зависимости).
  - Добавлении новых ключевых команд/настроек.
  - Появлении новых спецификаций (добавить ссылки).
  - Выпуске значимых релизов (обновить changelog/roadmap).
- При изменении README необходимо:
  - Проверить соответствие данному документу.
  - Обновить контрольный список (см. [[./spec/compliance-checklist-v1.org]]).
  - При необходимости дополнить документацию (скриншоты, примеры).

* Матрица соответствия (README ↔ спецификации)
| Раздел README            | Спецификация/источник          |
|-------------------------+--------------------------------|
| Особенности             | [[./spec/ui-v1.org]], [[./spec/apply-pipeline-v1.org]] |
| Установка               | README (настоящий документ)    |
| Быстрый старт           | [[./spec/carriage-mode-v1.org]] |
| Команды и хоткеи        | [[./spec/api-v1.org]], [[./spec/keyspec-v1.org]] |
| Настройки               | [[./spec/api-v1.org]], [[./spec/context-integration-v1.org]] |
| Расширяемость           | [[./spec/extensibility-points-v1.org]] |
| Требования и безопасность | [[./spec/security-v1.org]], [[./spec/apply-engines-v1.org]] |
| Отладка/FAQ             | [[./spec/logging-v1.org]], [[./spec/testing-v1.org]] |
| Вклад                   | [[./spec/compliance-checklist-v1.org]], CONTRIBUTING |
| Лицензия                | LICENSE                        |
| История изменений       | CHANGELOG.org                  |

* Контрольные вопросы для ревью README
1. Присутствуют ли заголовок, бейджи и краткое описание?
2. Описаны ли способы установки через MELPA/ELPA и вручную?
3. Есть ли быстрый старт с минимальным конфигом?
4. Перечислены ли ключевые особенности и команды с ссылками на спецификации?
5. Указаны ли настройки, требования и политика безопасности?
6. Есть ли разделы про отладку, вклад, лицензию, changelog?
7. Соответствует ли README данному документу по структуре и стилю?
8. Актуальны ли все ссылки и примеры команд/скриншоты?
9. Пройден ли lint Org (отсутствуют ошибки форматирования, битые ссылки)?

* Взаимодействие с чек-листом соответствия
- Раздел «Документация» в [[./spec/compliance-checklist-v1.org]] требует подтверждения соответствия README данной спецификации.
- При релизе/PR с изменениями README указывать в описании выполненные проверки по пунктам выше.

* Эволюция
- v1 — базовые требования (настоящая версия).
- v1.1 (план): мультиязычная версия, автогенерация таблиц команд из keyspec, интеграция с сайта документации.
- Изменения в структуре README требуют обновления `spec/readme-v1.org`, `spec/index.org`, `spec/compliance-checklist-v1.org` и уведомления команды документации.

